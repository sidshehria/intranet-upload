{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction ChatbotComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r4);\n  }\n}\n\nconst _c0 = function (a1, a2) {\n  return {\n    \"message\": true,\n    \"incoming\": a1,\n    \"outgoing\": a2\n  };\n};\n\nfunction ChatbotComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const msg_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, msg_r5.sender === \"bot\", msg_r5.sender === \"user\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(msg_r5.text);\n  }\n}\n\nfunction ChatbotComponent_div_17_iframe_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"iframe\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r6.selectedPdfUrl, i0.ɵɵsanitizeResourceUrl);\n  }\n}\n\nfunction ChatbotComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ChatbotComponent_div_17_iframe_3_Template, 1, 1, \"iframe\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Viewing PDF: \", ctx_r2.selectedPdf.name, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedPdfUrl);\n  }\n}\n\nfunction ChatbotComponent_div_22_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 21);\n    i0.ɵɵlistener(\"click\", function ChatbotComponent_div_22_li_2_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const suggestion_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.openPdfFile(suggestion_r8);\n    });\n    i0.ɵɵelementStart(1, \"div\", 22);\n    i0.ɵɵelementStart(2, \"span\", 23);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCC4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 24);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const suggestion_r8 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(suggestion_r8.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(suggestion_r8.path);\n  }\n}\n\nfunction ChatbotComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵelementStart(1, \"ul\");\n    i0.ɵɵtemplate(2, ChatbotComponent_div_22_li_2_Template, 8, 2, \"li\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.pdfSuggestions);\n  }\n}\n\nexport let ChatbotComponent = /*#__PURE__*/(() => {\n  class ChatbotComponent {\n    constructor(sanitizer) {\n      this.sanitizer = sanitizer;\n      this.searchHistory = [];\n      this.currentMessage = '';\n      this.chatMessages = [];\n      this.autoSuggestions = [];\n      this.pdfSuggestions = [];\n      this.allPdfFiles = [];\n      this.selectedPdf = null;\n      this.selectedPdfUrl = null;\n      this.datasheetData = [];\n    }\n\n    ngOnInit() {\n      this.generateAutoSuggestions();\n      this.addBotMessage('Hello, how can I assist you today?');\n    }\n\n    sendMessage() {\n      const message = this.currentMessage.trim();\n\n      if (message === '') {\n        return;\n      }\n\n      this.addUserMessage(message);\n      this.searchHistory.unshift(message);\n      this.currentMessage = '';\n      this.generateAutoSuggestions();\n      this.respondToMessage(message);\n    }\n\n    addUserMessage(text) {\n      this.chatMessages.push({\n        text,\n        sender: 'user'\n      });\n    }\n\n    addBotMessage(text) {\n      this.chatMessages.push({\n        text,\n        sender: 'bot'\n      });\n    }\n\n    respondToMessage(message) {\n      const lowerMsg = message.toLowerCase(); // Simple keyword matching on datasheet keys and values\n\n      let response = this.findMatchingResponse(lowerMsg);\n\n      if (!response) {\n        response = \"Sorry, I couldn't find information related to your query. Please try asking about cable construction, fiber characteristics, or cable specifications.\";\n      }\n\n      this.addBotMessage(response);\n    }\n\n    findMatchingResponse(query) {\n      // Search in datasheetData keys and nested keys for matching keywords\n      for (const sectionKey of Object.keys(this.datasheetData.technical_specifications || {})) {\n        const section = this.datasheetData.technical_specifications[sectionKey];\n\n        if (typeof section === 'object' && section !== null) {\n          for (const key of Object.keys(section)) {\n            const value = section[key];\n\n            if (key.toLowerCase().includes(query) || typeof value === 'string' && value.toLowerCase().includes(query)) {\n              return `${key}: ${value}`;\n            }\n          }\n        } else if (typeof section === 'string' && section.toLowerCase().includes(query)) {\n          return `${sectionKey}: ${section}`;\n        }\n      }\n\n      return null;\n    }\n\n    generateAutoSuggestions() {\n      // Extract keys from datasheetData technical_specifications for suggestions\n      const suggestionsSet = new Set();\n      const techSpecs = this.datasheetData.technical_specifications || {};\n\n      for (const sectionKey of Object.keys(techSpecs)) {\n        suggestionsSet.add(sectionKey);\n        const section = techSpecs[sectionKey];\n\n        if (typeof section === 'object' && section !== null) {\n          for (const key of Object.keys(section)) {\n            suggestionsSet.add(key);\n          }\n        }\n      }\n\n      this.autoSuggestions = Array.from(suggestionsSet).slice(0, 10); // limit to 10 suggestions\n    }\n\n    onSuggestionClick(suggestion) {\n      this.currentMessage = suggestion;\n    }\n\n    onSearchInput(event) {\n      const query = event.target.value.toLowerCase().trim();\n\n      if (query.length === 0) {\n        this.pdfSuggestions = [];\n        return;\n      } // Load PDF files from input_docs\n\n\n      this.loadPdfFiles(); // Filter PDF files based on search query\n\n      this.pdfSuggestions = this.allPdfFiles.filter(pdf => pdf.name.toLowerCase().includes(query)).slice(0, 5); // Limit to 5 suggestions\n    }\n\n    loadPdfFiles() {\n      // Get PDF files from the actual input_docs folder structure\n      this.allPdfFiles = [{\n        name: '24F,96F MTUA SS LSZH BK - Indoor - AR',\n        path: 'Export Technical Datasheet',\n        fullPath: 'input_docs/Export Technical Datasheet/Datasheet  - 24F,96F MTUA SS LSZH BK - Indoor - AR.pdf'\n      }, {\n        name: '2F,4F,8F D UTA AY SS LSZH BK - 8.5MM - KH9M',\n        path: 'Export Technical Datasheet',\n        fullPath: 'input_docs/Export Technical Datasheet/Datasheet - 2F,4F,8F D UTA AY SS LSZH BK - 8.5MM - KH9M.pdf'\n      }, {\n        name: '12F,24F D UTA GY SS PE BK - 8.5MM',\n        path: 'Export Technical Datasheet',\n        fullPath: 'input_docs/Export Technical Datasheet/Datasheet - 12F,24F D UTA GY SS PE BK - 8.5MM.pdf'\n      }, {\n        name: '24,48,96F MT UA DS LSZH GY PE',\n        path: 'Export Technical Datasheet',\n        fullPath: 'input_docs/Export Technical Datasheet/Datasheet - 24,48,96F MT UA DS LSZH GY PE  .pdf'\n      }, {\n        name: '144F A1 & D MT MICRO SS PE BK - 7.9 mm',\n        path: 'Export Technical Datasheet',\n        fullPath: 'input_docs/Export Technical Datasheet/Datasheet - 144F A1 & D MT MICRO SS PE BK - 7.9 mm.pdf'\n      }, {\n        name: '288F MT MICRO SS LSZH BK - 8.0 mm - 12FT',\n        path: 'Export Technical Datasheet',\n        fullPath: 'input_docs/Export Technical Datasheet/Datasheet - 288F  MT MICRO SS LSZH BK - 8.0 mm - 12FT.pdf'\n      }];\n    }\n\n    openPdfFile(pdf) {\n      // Build a path that Angular will serve\n      const fileUrl = `assets/${pdf.fullPath}`;\n      this.selectedPdf = pdf;\n      this.selectedPdfUrl = this.sanitizer.bypassSecurityTrustResourceUrl(fileUrl);\n      this.addBotMessage(`Opening PDF: ${pdf.name}`);\n      this.pdfSuggestions = [];\n      this.currentMessage = '';\n    }\n\n  }\n\n  ChatbotComponent.ɵfac = function ChatbotComponent_Factory(t) {\n    return new (t || ChatbotComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer));\n  };\n\n  ChatbotComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChatbotComponent,\n    selectors: [[\"app-chatbot\"]],\n    decls: 23,\n    vars: 5,\n    consts: [[2, \"text-align\", \"center\", \"margin-bottom\", \"1rem\"], [2, \"color\", \"rgb(20, 14, 14)\", \"font-size\", \"2.5rem\", \"font-weight\", \"700\", \"margin-bottom\", \"0.5rem\"], [2, \"color\", \"rgba(20, 13, 13, 0.8)\", \"font-size\", \"1.1rem\"], [1, \"chat-container\"], [1, \"history-section\"], [4, \"ngFor\", \"ngForOf\"], [1, \"chat-card\"], [1, \"chat-header\"], [1, \"h2\"], [1, \"chat-body\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"chat-footer\"], [\"placeholder\", \"Write a message\", \"type\", \"text\", 3, \"ngModel\", \"ngModelChange\", \"keyup\", \"keyup.enter\"], [3, \"click\"], [\"class\", \"search-suggestions\", 4, \"ngIf\"], [3, \"ngClass\"], [\"width\", \"100%\", \"height\", \"400px\", 3, \"src\", 4, \"ngIf\"], [\"width\", \"100%\", \"height\", \"400px\", 3, \"src\"], [1, \"search-suggestions\"], [\"class\", \"suggestion-item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"suggestion-item\", 3, \"click\"], [1, \"suggestion-content\"], [1, \"pdf-icon\"], [1, \"pdf-name\"], [1, \"pdf-path\"]],\n    template: function ChatbotComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2, \" Cable Specification viewer \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\", 2);\n        i0.ɵɵtext(4, \" View technical documents and get desired output. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"h3\");\n        i0.ɵɵtext(8, \"Search History\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ul\");\n        i0.ɵɵtemplate(10, ChatbotComponent_li_10_Template, 2, 1, \"li\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 6);\n        i0.ɵɵelementStart(12, \"div\", 7);\n        i0.ɵɵelementStart(13, \"div\", 8);\n        i0.ɵɵtext(14, \"Sales\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 9);\n        i0.ɵɵtemplate(16, ChatbotComponent_div_16_Template, 3, 5, \"div\", 10);\n        i0.ɵɵtemplate(17, ChatbotComponent_div_17_Template, 4, 2, \"div\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 12);\n        i0.ɵɵelementStart(19, \"input\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function ChatbotComponent_Template_input_ngModelChange_19_listener($event) {\n          return ctx.currentMessage = $event;\n        })(\"keyup\", function ChatbotComponent_Template_input_keyup_19_listener($event) {\n          return ctx.onSearchInput($event);\n        })(\"keyup.enter\", function ChatbotComponent_Template_input_keyup_enter_19_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function ChatbotComponent_Template_button_click_20_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵtext(21, \"Send\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(22, ChatbotComponent_div_22_Template, 3, 1, \"div\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.searchHistory);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.chatMessages);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedPdf && ctx.selectedPdfUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.currentMessage);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.pdfSuggestions.length > 0);\n      }\n    },\n    directives: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.NgClass],\n    styles: [\"[_nghost-%COMP%]{font-family:\\\"Segoe UI\\\",Tahoma,Geneva,Verdana,sans-serif;display:flex;flex-direction:column;align-items:center;padding:1rem;background-color:#f9fafb;min-height:100vh;box-sizing:border-box}header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#222;font-size:2.5rem;font-weight:700;margin-bottom:.5rem}header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1.1rem;margin:0}.chat-container[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1500px;height:500px;grid-gap:1rem;gap:1rem}.history-section[_ngcontent-%COMP%]{width:200px;background-color:#fff;border-radius:12px;box-shadow:0 8px 24px #0000001f;padding:1rem;overflow-y:auto}.history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.25rem;font-weight:600;color:#041a72;margin-bottom:1rem}.history-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.history-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e0e0e0;cursor:pointer;color:#202124}.history-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e8f0fe}.chat-card[_ngcontent-%COMP%]{flex-grow:1;background-color:#fff;border-radius:12px;box-shadow:0 8px 24px #0000001f;display:flex;flex-direction:column;overflow:hidden;height:100%}.chat-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;background-color:#041a72;color:#fff;font-size:1.25rem;font-weight:600;display:flex;align-items:center;box-shadow:0 2px 4px #1a73e866}.chat-header[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{margin:0}.chat-body[_ngcontent-%COMP%]{flex-grow:1;padding:1rem 1.5rem;overflow-y:auto;background-color:#f5f7fa;display:flex;flex-direction:column;grid-gap:.75rem;gap:.75rem}.message[_ngcontent-%COMP%]{max-width:75%;padding:.1rem .8rem;border-radius:16px;font-size:1rem;line-height:1.4;box-shadow:0 2px 6px #00000014;animation:chatAnimation .3s ease-in-out forwards}.incoming[_ngcontent-%COMP%]{background-color:#272829;color:#fff;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;align-self:flex-start;border-top-left-radius:0}.outgoing[_ngcontent-%COMP%]{background-color:#041a72;color:#fff;align-self:flex-end;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;border-top-right-radius:0;text-align:right}.chat-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;background-color:#041a72;display:flex;grid-gap:.75rem;gap:.75rem;box-shadow:0 -2px 4px #1a73e866}.chat-footer[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex-grow:1;padding:.75rem 1rem;border:none;border-radius:24px;font-size:1rem;outline:none;transition:box-shadow .3s ease}.chat-footer[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #fff9}.chat-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 1.5rem;border:none;border-radius:24px;background-color:#041a72;color:#fff;font-weight:700;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.chat-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#041a72}@keyframes chatAnimation{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.chat-container[_ngcontent-%COMP%]{flex-direction:column;max-width:100%;height:auto}.history-section[_ngcontent-%COMP%]{width:100%;height:150px;margin-bottom:1rem;overflow-y:auto}.chat-card[_ngcontent-%COMP%]{height:100vh;border-radius:0}.chat-body[_ngcontent-%COMP%]{padding:1rem}.chat-footer[_ngcontent-%COMP%]{padding:1rem}}\"]\n  });\n  return ChatbotComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}